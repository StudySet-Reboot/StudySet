<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Calendar</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/style/header.css}">
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css}"/>
    <link rel="stylesheet" th:href="@{/style/group/calendar.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <script th:src="@{/js/group/calendar.js}"></script>
</head>
<body>
<!-- header 삽입 -->
<div th:replace="~{thyme/group/groupHeader :: groupHeader (group=${group})}"></div>

<!-- calendar -->
<div class="cal-container">
    <div id="calendar"></div>
</div>
<input type="hidden" id="groupId" name="groupId" th:value="${group.id}" />
<input type="hidden" id="scheduleList" name="scheduleList" th:value="${jsonList}" />
<!-- 이벤트 생성 Modal -->
<div id="eventModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <form class="modal-form" id="eventForm" th:action="@{/groups/{groupId}/schedules(groupId=${group.id})}" method="post">
            <h2>이벤트 생성</h2>
            <label for="is-important" class="custom-label">중요</label>
            <input type="checkbox" name="isImportant" id="is-important" value="true">
            <label for="event-name" class="custom-label">제목</label>
            <input type="text" id="event-name" name="title" placeholder="이벤트 제목을 입력하세요" required>
            <label for="start-time" class="custom-label">날짜/시간</label>
            <input type="datetime-local" name="startDate" id="start-time" class="custom-datetime-local"> ~ <input type="datetime-local" id="end-time" name="endDate" class="custom-datetime-local">
            <label for="event-description" class="custom-label">설명</label>
            <input type="text" id="event-description" name="description" placeholder="이벤트 설명">
            <label for="event-place" class="custom-label">장소</label>
            <input id="event-place" type="text" name="location" placeholder="장소">
            <button type="submit">생성</button>
        </form>
    </div>
</div>

<!-- 이벤트 수정 Modal -->
<div id="edit-event-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <form class="modal-form" id="editForm" th:action="@{/groups/{groupId}/schedules(groupId=${group.id})}" method="patch">
            <h2>이벤트 수정</h2>
            <label for="edit-is-important" class="custom-label">중요</label>
            <input type="checkbox" name="isImportant" id="edit-is-important" value="true">
            <label for="edit-event-description" class="custom-label">제목</label>
            <input type="text" id="edit-event-name" name="title" placeholder="이벤트 제목을 입력하세요" required>
            <label>날짜/시간</label>
            <input type="datetime-local" name="startDate" id="edit-start-time" class="custom-datetime-local"> ~ <input type="datetime-local" id="edit-end-time" name="endDate" class="custom-datetime-local">
            <label for="edit-event-description" class="custom-label">설명</label>
            <input type="text" id="edit-event-description" name="description" placeholder="이벤트 설명">
            <label for="edit-event-place" class="custom-label">장소</label>
            <input id="edit-event-place" type="text" name="location" placeholder="장소">
            <button type="submit">생성</button>
        </form>
    </div>
</div>

</body>
</html>
