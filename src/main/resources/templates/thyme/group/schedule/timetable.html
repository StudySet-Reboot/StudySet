<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Calendar</title>
    <link rel="stylesheet" th:href="@{/style/header.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" th:href="@{/style/group/calendar.css}">
    <script th:src="@{/js/group/calendar.js}"></script>
</head>
<body>
<!-- header -->
<div th:replace="~{thyme/group/groupHeader :: groupHeader (group=${group})}"></div>

<!-- 조정 버튼 -->
<div class="button-container">
    <button id="adjust-schedule-btn">캘린더 보기</button>
</div>

<!-- time table -->
<div class="timetable">
    <!-- Generate timetable cells -->
    <div class="draggable" data-day="Mon" data-hour="0">Mon 00:00</div>
    <div class="draggable" data-day="Mon" data-hour="1">Mon 01:00</div>
    <!-- Repeat for all hours and days -->
    <div class="droppable"></div>
</div>

<script>
    $(document).ready(function() {
        $('.draggable').draggable({
            helper: 'clone',
            revert: 'invalid',
            start: function(event, ui) {
                $(this).css('opacity', '0.5');
            },
            stop: function(event, ui) {
                $(this).css('opacity', '1');
            }
        });

        $('.droppable').droppable({
            accept: '.draggable',
            hoverClass: 'droppable-hover',
            drop: function(event, ui) {
                $(this).css('background-color', $(ui.helper).css('background-color'));
            }
        });

        // Create timetable cells dynamically
        function createTimetable() {
            let days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            let hours = Array.from({length: 24}, (_, i) => i);

            let timetableHtml = '';
            days.forEach(day => {
                hours.forEach(hour => {
                    timetableHtml += `<div class="draggable" data-day="${day}" data-hour="${hour}">${day} ${hour}:00</div>`;
                });
            });

            $('.timetable').html(timetableHtml);

            $('.draggable').draggable({
                helper: 'clone',
                revert: 'invalid'
            });

            $('.droppable').droppable({
                accept: '.draggable',
                hoverClass: 'droppable-hover',
                drop: function(event, ui) {
                    $(this).css('background-color', $(ui.helper).css('background-color'));
                }
            });
        }

        createTimetable(); // Call this function to populate the timetable
    });
</script>

</body>
</html>

<input type="hidden" id="groupId" name="groupId" th:value="${group.id}" />

</body>
</html>
